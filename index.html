<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî Personalized</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #faf5ff;
    }
    html, body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(180deg, #fdf2f8, #f3e8ff, #e0f2fe);
      overflow-x: hidden;
    }

    #confetti-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 50;
    }

    .fade-in {
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 1.5s ease forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes bounce-slow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .animate-bounce-slow {
      animation: bounce-slow 3s infinite;
    }

    /* Dekorasi balon */
    .balloon {
      position: absolute;
      bottom: -150px;
      width: 60px;
      height: 80px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.6), transparent 70%), var(--color);
      animation: float 10s ease-in-out infinite;
      opacity: 0.8;
    }
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-300px) rotate(10deg); }
      100% { transform: translateY(0) rotate(-10deg); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6 relative">

  <!-- confetti -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Dekorasi balon -->
  <div class="balloon" style="left:10%; --color:#fbcfe8; animation-delay:0s;"></div>
  <div class="balloon" style="left:40%; --color:#c7d2fe; animation-delay:2s;"></div>
  <div class="balloon" style="left:70%; --color:#fde68a; animation-delay:4s;"></div>

  <div id="app" class="w-full max-w-xl z-10">

    <!-- Input nama -->
    <section id="page-landing" class="bg-white/70 backdrop-blur-xl p-8 rounded-2xl shadow-md text-center border border-pink-100">
      <h1 class="text-3xl font-semibold mb-2 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Ada sedikit kejutan nih üéâ</h1>
      <p class="text-gray-600 text-sm mb-6">Masukkan nama dulu ya</p>

      <input id="nameInput" type="text" placeholder="Nama kamu..." class="border w-full p-3 rounded-lg mb-4 shadow-sm focus:ring-2 focus:ring-pink-200 outline-none" />
      <button id="startBtn" class="bg-gradient-to-r from-pink-300 to-purple-300 px-6 py-2 rounded-lg shadow hover:scale-105 transition text-white font-medium">Mulai üéà</button>
    </section>

    <!-- Halaman ucapan -->
    <section id="page-main" class="hidden relative bg-white/80 backdrop-blur-xl p-10 rounded-3xl shadow-2xl mt-6 text-center overflow-hidden">

      <!-- dekorasi -->
      <div class="absolute -top-10 -left-10 w-40 h-40 bg-pink-100 rounded-full blur-3xl opacity-70 animate-pulse"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-purple-100 rounded-full blur-3xl opacity-70 animate-pulse"></div>

      <!-- kue ulang tahun -->
      <div class="flex justify-center mb-6 relative z-10">
        <img src="https://cdn-icons-png.flaticon.com/512/7460/7460333.png" alt="cake" class="w-24 h-24 animate-bounce-slow">
      </div>

      <!-- judul -->
      <h2 id="greeting" class="text-4xl font-bold mb-4 bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent">Happy Birthday!</h2>

      <!-- teks ucapan -->
      <p id="birthdayMessage" class="text-gray-700 text-base leading-relaxed max-w-md mx-auto mb-8"></p>

      <!-- tombol hadiah -->
      <div class="flex justify-center">
        <button id="specialBtn" class="border border-gray-300 px-5 py-2 rounded-lg text-sm hover:bg-gray-100 transition">Lihat Hadiah üéÅ</button>
      </div>
    </section>
  </div>

  <!-- Audio -->
  <audio id="bgAudio" src="audio/ultah.mp3" type="audio/mpeg"></audio>

  <!-- Video fullscreen -->
  <video id="giftVideo" class="hidden fixed inset-0 w-full h-full bg-black z-50" controls>
    <source src="video/hadiah.mp4" type="video/mp4">
    Browser kamu tidak mendukung video.
  </video>

  <script>
  // confetti setup
  const canvas = document.getElementById('confetti-canvas');
  const ctx = canvas.getContext('2d');
  let w, h, confetti = [];
  function resize(){ w=canvas.width=innerWidth; h=canvas.height=innerHeight; }
  resize(); window.addEventListener('resize', resize);
  function rand(min,max){return Math.random()*(max-min)+min;}
  function spawnConfetti(){ confetti=[]; for(let i=0;i<80;i++){confetti.push({x:rand(0,w),y:rand(-h,0),r:rand(3,8),color:['#FDE68A','#FBCFE8','#C7D2FE','#DCFCE7'][Math.floor(Math.random()*4)],speed:rand(1,3)});} }
  function update(){ ctx.clearRect(0,0,w,h); confetti.forEach(p=>{p.y+=p.speed; if(p.y>h)p.y=-10; ctx.fillStyle=p.color; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();}); requestAnimationFrame(update);}
  function startConfetti(){ spawnConfetti(); update(); }

  // element references
  const nameInput=document.getElementById('nameInput');
  const startBtn=document.getElementById('startBtn');
  const landing=document.getElementById('page-landing');
  const main=document.getElementById('page-main');
  const greeting=document.getElementById('greeting');
  const specialBtn=document.getElementById('specialBtn');
  const bgAudio=document.getElementById('bgAudio');
  const giftVideo=document.getElementById('giftVideo');

  const message = `üéâ Happy 25th Birthday! üéâ
Selamat ulang tahun ya, semoga di usia yang ke-25 ini selalu diberi kesehatan, kelancaran rezeki, dan kebahagiaan yang gak ada habisnya.
May all your plans and dreams come true, little by little.
Semoga langkah kamu makin ringan, hati makin tenang, dan hidupnya selalu dikelilingi orang-orang baik.
Keep being the good person you are ‚Äî sabar, tulus, dan gak mudah nyerah.
Wishing you all the best always ‚ù§ Enjoy your special day!`;

  startBtn.onclick=()=>{
    const name=nameInput.value.trim()||'Teman';
    localStorage.setItem('hb_name',name);
    greeting.innerText=`Happy Birthday, ${name}! üéâ`;
    landing.classList.add('hidden');
    main.classList.remove('hidden');

    document.querySelectorAll('#page-main p, #page-main h2').forEach((el,i)=>{
      el.classList.add('fade-in');
      el.style.animationDelay=`${i*0.5}s`;
    });

    startConfetti();
    bgAudio.play().catch(()=>{});

    const textEl = document.getElementById('birthdayMessage');
    let i = 0;
    textEl.innerHTML = '';
    function typeWriter() {
      if (i < message.length) {
        textEl.innerHTML += message.charAt(i);
        i++;
        setTimeout(typeWriter, 40);
      }
    }
    typeWriter();
  }

  // tombol hadiah: video fullscreen
  specialBtn.onclick=()=>{ 
    giftVideo.classList.remove('hidden');
    giftVideo.requestFullscreen().then(()=>{
      giftVideo.play();
    }).catch(()=>{
      giftVideo.play();
    });
  };

  // keluar fullscreen otomatis saat video selesai
  giftVideo.onended = () => {
    if (document.fullscreenElement) document.exitFullscreen();
    giftVideo.classList.add('hidden');
  };

  const stored=localStorage.getItem('hb_name');
  if(stored){ nameInput.value=stored; }
  </script>
</body>
</html>
